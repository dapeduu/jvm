\doxysection{Referência do Arquivo src/class\+\_\+loader.c}
\hypertarget{class__loader_8c}{}\label{class__loader_8c}\index{src/class\_loader.c@{src/class\_loader.c}}


Implementação das funções de carregamento de classes, métodos e atributos. Também implementa funções de leitura de constant pool e atributos.  


{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include "{}core.\+h"{}}\newline
{\ttfamily \#include "{}class\+\_\+loader.\+h"{}}\newline
\doxysubsubsection*{Funções}
\begin{DoxyCompactItemize}
\item 
u1\+\_\+t \mbox{\hyperlink{class__loader_8c_a180bfadbf8207a3832ca0af09e53762d}{read\+\_\+u1}} (FILE \texorpdfstring{$\ast$}{*}fptr)
\begin{DoxyCompactList}\small\item\em read\+\_\+u1 \end{DoxyCompactList}\item 
u2\+\_\+t \mbox{\hyperlink{class__loader_8c_ad707bafcf4fec166f8e995e60675d504}{read\+\_\+u2}} (FILE \texorpdfstring{$\ast$}{*}fptr)
\begin{DoxyCompactList}\small\item\em read\+\_\+u2 \end{DoxyCompactList}\item 
u4\+\_\+t \mbox{\hyperlink{class__loader_8c_ac70609e32c77ce3dc8c96ffa390697ac}{read\+\_\+u4}} (FILE \texorpdfstring{$\ast$}{*}fptr)
\begin{DoxyCompactList}\small\item\em read\+\_\+u4 \end{DoxyCompactList}\item 
char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class__loader_8c_a3e07a39b119a061031dd7e3304ce30d5}{get\+\_\+constant\+\_\+pool\+\_\+value}} (\mbox{\hyperlink{structcp__info__t}{cp\+\_\+info\+\_\+t}} \texorpdfstring{$\ast$}{*}cp\+\_\+info, u2\+\_\+t name\+\_\+index)
\begin{DoxyCompactList}\small\item\em get\+\_\+constant\+\_\+pool\+\_\+value \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class__loader_8c_a5b289f6eb9f625c2e8b4b0ad57ef82de}{is\+\_\+linking\+\_\+check\+\_\+successful}} (\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*}class\+\_\+file, FILE \texorpdfstring{$\ast$}{*}fptr)
\begin{DoxyCompactList}\small\item\em is\+\_\+linking\+\_\+check\+\_\+successful \end{DoxyCompactList}\item 
\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class__loader_8c_abed65950acee57ee4a43e16f3ad2be0f}{read\+\_\+class\+\_\+file}} (FILE \texorpdfstring{$\ast$}{*}fptr)
\begin{DoxyCompactList}\small\item\em read\+\_\+class\+\_\+file \end{DoxyCompactList}\item 
\mbox{\hyperlink{structloaded__classes}{loaded\+\_\+classes\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class__loader_8c_a1bc91b26d02e5ef38b3f50165c4f7f99}{load\+\_\+class}} (\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*}class\+\_\+file, const char \texorpdfstring{$\ast$}{*}filepath)
\begin{DoxyCompactList}\small\item\em load\+\_\+class \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descrição detalhada}
Implementação das funções de carregamento de classes, métodos e atributos. Também implementa funções de leitura de constant pool e atributos. 



\doxysubsection{Funções}
\Hypertarget{class__loader_8c_a3e07a39b119a061031dd7e3304ce30d5}\index{class\_loader.c@{class\_loader.c}!get\_constant\_pool\_value@{get\_constant\_pool\_value}}
\index{get\_constant\_pool\_value@{get\_constant\_pool\_value}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{get\_constant\_pool\_value()}{get\_constant\_pool\_value()}}
{\footnotesize\ttfamily \label{class__loader_8c_a3e07a39b119a061031dd7e3304ce30d5} 
char \texorpdfstring{$\ast$}{*} get\+\_\+constant\+\_\+pool\+\_\+value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcp__info__t}{cp\+\_\+info\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{cp\+\_\+info}{, }\item[{u2\+\_\+t}]{name\+\_\+index}{}\end{DoxyParamCaption})}



get\+\_\+constant\+\_\+pool\+\_\+value 

Função que retorna o valor do constant pool de acordo com o index.


\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o constant pool. \\
\hline
\mbox{\texttt{ out}}  & {\em param2} & Index do valor a ser retornado. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Valor do constant pool. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_a5b289f6eb9f625c2e8b4b0ad57ef82de}\index{class\_loader.c@{class\_loader.c}!is\_linking\_check\_successful@{is\_linking\_check\_successful}}
\index{is\_linking\_check\_successful@{is\_linking\_check\_successful}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{is\_linking\_check\_successful()}{is\_linking\_check\_successful()}}
{\footnotesize\ttfamily \label{class__loader_8c_a5b289f6eb9f625c2e8b4b0ad57ef82de} 
int is\+\_\+linking\+\_\+check\+\_\+successful (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{class\+\_\+file}{, }\item[{FILE \texorpdfstring{$\ast$}{*}}]{fptr}{}\end{DoxyParamCaption})}



is\+\_\+linking\+\_\+check\+\_\+successful 

Função que faz a checagem do magic number e da versão do class file.


\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o arquivo. \\
\hline
\mbox{\texttt{ out}}  & {\em param2} & Ponteiro para a struct \doxylink{structclass__file__t}{class\+\_\+file\+\_\+t}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
1 se a checagem foi bem sucedida, 0 caso contrário. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_a1bc91b26d02e5ef38b3f50165c4f7f99}\index{class\_loader.c@{class\_loader.c}!load\_class@{load\_class}}
\index{load\_class@{load\_class}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{load\_class()}{load\_class()}}
{\footnotesize\ttfamily \label{class__loader_8c_a1bc91b26d02e5ef38b3f50165c4f7f99} 
\mbox{\hyperlink{structloaded__classes}{loaded\+\_\+classes\+\_\+t}} \texorpdfstring{$\ast$}{*} load\+\_\+class (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{class\+\_\+file}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{filepath}{}\end{DoxyParamCaption})}



load\+\_\+class 

Faz a leitura de um arquivo .class e carrega as informações em uma estrutura de loaded\+\_\+classes\+\_\+t para sinalizar que a classe foi carregada.


\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & \doxylink{structclass__file__t}{class\+\_\+file\+\_\+t} que contém as informações da classe. \\
\hline
\mbox{\texttt{ out}}  & {\em param2} & filepath que contém o caminho do arquivo .class. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
loaded\+\_\+classes\+\_\+t\texorpdfstring{$\ast$}{*} que contém as informações da classe carregada. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_abed65950acee57ee4a43e16f3ad2be0f}\index{class\_loader.c@{class\_loader.c}!read\_class\_file@{read\_class\_file}}
\index{read\_class\_file@{read\_class\_file}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{read\_class\_file()}{read\_class\_file()}}
{\footnotesize\ttfamily \label{class__loader_8c_abed65950acee57ee4a43e16f3ad2be0f} 
\mbox{\hyperlink{structclass__file__t}{class\+\_\+file\+\_\+t}} \texorpdfstring{$\ast$}{*} read\+\_\+class\+\_\+file (\begin{DoxyParamCaption}\item[{FILE \texorpdfstring{$\ast$}{*}}]{fptr}{}\end{DoxyParamCaption})}



read\+\_\+class\+\_\+file 

Função que lê um arquivo .class e retorna um ponteiro para a struct \doxylink{structclass__file__t}{class\+\_\+file\+\_\+t}, alocando memória para os campos e constant pool. Leitura do magic number, versão, constant pool count e constant pool. Após a leitura, é feita a checagem do magic number e da versão do class file, e os campos ficam salvos na struct \doxylink{structclass__file__t}{class\+\_\+file\+\_\+t}.


\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o arquivo. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Ponteiro para a struct \doxylink{structclass__file__t}{class\+\_\+file\+\_\+t}. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_a180bfadbf8207a3832ca0af09e53762d}\index{class\_loader.c@{class\_loader.c}!read\_u1@{read\_u1}}
\index{read\_u1@{read\_u1}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{read\_u1()}{read\_u1()}}
{\footnotesize\ttfamily \label{class__loader_8c_a180bfadbf8207a3832ca0af09e53762d} 
u1\+\_\+t read\+\_\+u1 (\begin{DoxyParamCaption}\item[{FILE \texorpdfstring{$\ast$}{*}}]{fptr}{}\end{DoxyParamCaption})}



read\+\_\+u1 

Função que lê um byte de um arquivo.


\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o arquivo. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Byte lido. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_ad707bafcf4fec166f8e995e60675d504}\index{class\_loader.c@{class\_loader.c}!read\_u2@{read\_u2}}
\index{read\_u2@{read\_u2}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{read\_u2()}{read\_u2()}}
{\footnotesize\ttfamily \label{class__loader_8c_ad707bafcf4fec166f8e995e60675d504} 
u2\+\_\+t read\+\_\+u2 (\begin{DoxyParamCaption}\item[{FILE \texorpdfstring{$\ast$}{*}}]{fptr}{}\end{DoxyParamCaption})}



read\+\_\+u2 

Função que lê 2 bytes de um arquivo. 
\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o arquivo. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
2 bytes lidos. 
\end{DoxyReturn}
\Hypertarget{class__loader_8c_ac70609e32c77ce3dc8c96ffa390697ac}\index{class\_loader.c@{class\_loader.c}!read\_u4@{read\_u4}}
\index{read\_u4@{read\_u4}!class\_loader.c@{class\_loader.c}}
\doxysubsubsection{\texorpdfstring{read\_u4()}{read\_u4()}}
{\footnotesize\ttfamily \label{class__loader_8c_ac70609e32c77ce3dc8c96ffa390697ac} 
u4\+\_\+t read\+\_\+u4 (\begin{DoxyParamCaption}\item[{FILE \texorpdfstring{$\ast$}{*}}]{fptr}{}\end{DoxyParamCaption})}



read\+\_\+u4 

Função que lê 4 bytes de um arquivo. 
\begin{DoxyParams}[1]{Parâmetros}
\mbox{\texttt{ in}}  & {\em param1} & Ponteiro para o arquivo. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
4 bytes lidos. 
\end{DoxyReturn}
